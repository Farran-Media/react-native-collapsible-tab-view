{"version":3,"names":["React","StyleSheet","useWindowDimensions","View","PagerView","Animated","runOnJS","runOnUI","useAnimatedReaction","useAnimatedStyle","useDerivedValue","useSharedValue","withDelay","withTiming","useFrameCallback","Context","TabNameContext","Lazy","MaterialTabBar","TABBAR_HEIGHT","Tab","IS_IOS","ONE_FRAME_MS","scrollToImpl","useAnimatedDynamicRefs","useContainerRef","usePageScrollHandler","useTabProps","useLayoutHeight","AnimatedPagerView","createAnimatedComponent","Container","memo","forwardRef","initialTabName","headerHeight","initialHeaderHeight","minHeaderHeight","tabBarHeight","initialTabBarHeight","revealHeaderOnScroll","snapThreshold","children","renderHeader","renderTabBar","props","createElement","headerContainerStyle","cancelTranslation","containerStyle","lazy","cancelLazyFadeIn","pagerProps","onIndexChange","onTabChange","width","customWidth","allowHeaderOverscroll","ref","containerRef","tabProps","tabNamesArray","refMap","setRef","windowWidth","containerHeight","getContainerLayoutHeight","getTabBarHeight","getHeaderHeight","initialIndex","useMemo","findIndex","n","contentInset","snappingTo","offset","accScrollY","oldAccScrollY","accDiffClamp","scrollYCurrent","scrollY","Object","fromEntries","map","contentHeights","tabNames","index","focusedTab","value","calculateNextOffset","headerScrollDistance","undefined","indexDecimal","afterRender","useEffect","duration","resyncTabScroll","name","trigger","nextIndex","Math","round","propagateTabChange","useCallback","change","syncCurrentTabScrollPosition","toggleSyncScrollFrame","toggle","syncScrollFrame","setActive","timeSinceFirstFrame","i","prevIndex","prevTabName","tabName","_current","prev","headerTranslateY","min","stylez","transform","translateY","onTabPress","_containerRef$current","current","setPage","length","tabLength","pageScrollHandler","onPageScroll","e","position","useImperativeHandle","setIndex","jumpToTab","getFocusedTab","getCurrentIndex","Provider","style","styles","container","onLayout","pointerEvents","topContainer","headerContainer","tabBarContainer","_extends","initialPage","absoluteFill","key","pageContainer","startMounted","Children","toArray","create","flex","height","zIndex","backgroundColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation"],"sources":["Container.tsx"],"sourcesContent":["import React from 'react'\nimport { StyleSheet, useWindowDimensions, View } from 'react-native'\nimport PagerView from 'react-native-pager-view'\nimport Animated, {\n  runOnJS,\n  runOnUI,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n  useSharedValue,\n  withDelay,\n  withTiming,\n  useFrameCallback,\n} from 'react-native-reanimated'\n\nimport { Context, TabNameContext } from './Context'\nimport { Lazy } from './Lazy'\nimport { MaterialTabBar, TABBAR_HEIGHT } from './MaterialTabBar'\nimport { Tab } from './Tab'\nimport { IS_IOS, ONE_FRAME_MS, scrollToImpl } from './helpers'\nimport {\n  useAnimatedDynamicRefs,\n  useContainerRef,\n  usePageScrollHandler,\n  useTabProps,\n  useLayoutHeight,\n} from './hooks'\nimport {\n  CollapsibleProps,\n  CollapsibleRef,\n  ContextType,\n  IndexChangeEventData,\n  TabName,\n} from './types'\n\nconst AnimatedPagerView = Animated.createAnimatedComponent(PagerView)\n\n/**\n * Basic usage looks like this:\n *\n * ```tsx\n * import { Tabs } from 'react-native-collapsible-tab-view'\n *\n * const Example = () => {\n *   return (\n *     <Tabs.Container renderHeader={MyHeader}>\n *       <Tabs.Tab name=\"A\">\n *         <ScreenA />\n *       </Tabs.Tab>\n *       <Tabs.Tab name=\"B\">\n *         <ScreenB />\n *       </Tabs.Tab>\n *     </Tabs.Container>\n *   )\n * }\n * ```\n */\nexport const Container = React.memo(\n  React.forwardRef<CollapsibleRef, CollapsibleProps>(\n    (\n      {\n        initialTabName,\n        headerHeight: initialHeaderHeight,\n        minHeaderHeight = 0,\n        tabBarHeight: initialTabBarHeight = TABBAR_HEIGHT,\n        revealHeaderOnScroll = false,\n        snapThreshold,\n        children,\n        renderHeader,\n        renderTabBar = (props) => <MaterialTabBar {...props} />,\n        headerContainerStyle,\n        cancelTranslation,\n        containerStyle,\n        lazy,\n        cancelLazyFadeIn,\n        pagerProps,\n        onIndexChange,\n        onTabChange,\n        width: customWidth,\n        allowHeaderOverscroll,\n      },\n      ref\n    ) => {\n      const containerRef = useContainerRef()\n\n      const [tabProps, tabNamesArray] = useTabProps(children, Tab)\n\n      const [refMap, setRef] = useAnimatedDynamicRefs()\n\n      const windowWidth = useWindowDimensions().width\n      const width = customWidth ?? windowWidth\n\n      const [containerHeight, getContainerLayoutHeight] = useLayoutHeight()\n\n      const [tabBarHeight, getTabBarHeight] =\n        useLayoutHeight(initialTabBarHeight)\n\n      const [headerHeight, getHeaderHeight] = useLayoutHeight(\n        !renderHeader ? 0 : initialHeaderHeight\n      )\n      const initialIndex = React.useMemo(\n        () =>\n          initialTabName\n            ? tabNamesArray.findIndex((n) => n === initialTabName)\n            : 0,\n        [initialTabName, tabNamesArray]\n      )\n\n      const contentInset = React.useMemo(() => {\n        if (allowHeaderOverscroll) return 0\n\n        // necessary for the refresh control on iOS to be positioned underneath the header\n        // this also adjusts the scroll bars to clamp underneath the header area\n        return IS_IOS ? (headerHeight || 0) + (tabBarHeight || 0) : 0\n      }, [headerHeight, tabBarHeight, allowHeaderOverscroll])\n\n      const snappingTo: ContextType['snappingTo'] = useSharedValue(0)\n      const offset: ContextType['offset'] = useSharedValue(0)\n      const accScrollY: ContextType['accScrollY'] = useSharedValue(0)\n      const oldAccScrollY: ContextType['oldAccScrollY'] = useSharedValue(0)\n      const accDiffClamp: ContextType['accDiffClamp'] = useSharedValue(0)\n      const scrollYCurrent: ContextType['scrollYCurrent'] = useSharedValue(0)\n      const scrollY: ContextType['scrollY'] = useSharedValue(\n        Object.fromEntries(tabNamesArray.map((n) => [n, 0]))\n      )\n\n      const contentHeights: ContextType['contentHeights'] = useSharedValue(\n        tabNamesArray.map(() => 0)\n      )\n\n      const tabNames: ContextType['tabNames'] = useDerivedValue<TabName[]>(\n        () => tabNamesArray,\n        [tabNamesArray]\n      )\n      const index: ContextType['index'] = useSharedValue(initialIndex)\n\n      const focusedTab: ContextType['focusedTab'] =\n        useDerivedValue<TabName>(() => {\n          return tabNames.value[index.value]\n        }, [tabNames])\n      const calculateNextOffset = useSharedValue(initialIndex)\n      const headerScrollDistance: ContextType['headerScrollDistance'] =\n        useDerivedValue(() => {\n          return headerHeight !== undefined ? headerHeight - minHeaderHeight : 0\n        }, [headerHeight, minHeaderHeight])\n\n      const indexDecimal: ContextType['indexDecimal'] = useSharedValue(\n        index.value\n      )\n\n      const afterRender = useSharedValue(0)\n      React.useEffect(() => {\n        afterRender.value = withDelay(\n          ONE_FRAME_MS * 5,\n          withTiming(1, { duration: 0 })\n        )\n      }, [afterRender, tabNamesArray])\n\n      const resyncTabScroll = () => {\n        'worklet'\n        for (const name of tabNamesArray) {\n          scrollToImpl(\n            refMap[name],\n            0,\n            scrollYCurrent.value - contentInset,\n            false\n          )\n        }\n      }\n\n      // the purpose of this is to scroll to the proper position if dynamic tabs are changing\n      useAnimatedReaction(\n        () => {\n          return afterRender.value === 1\n        },\n        (trigger) => {\n          if (trigger) {\n            afterRender.value = 0\n            resyncTabScroll()\n          }\n        },\n        [tabNamesArray, refMap, afterRender, contentInset]\n      )\n\n      // derived from scrollX\n      // calculate the next offset and index if swiping\n      // if scrollX changes from tab press,\n      // the same logic must be done, but knowing\n      // the next index in advance\n      useAnimatedReaction(\n        () => {\n          const nextIndex = Math.round(indexDecimal.value)\n          return nextIndex\n        },\n        (nextIndex) => {\n          if (nextIndex !== null && nextIndex !== index.value) {\n            calculateNextOffset.value = nextIndex\n          }\n        },\n        []\n      )\n\n      const propagateTabChange = React.useCallback(\n        (change: IndexChangeEventData<TabName>) => {\n          onTabChange?.(change)\n          onIndexChange?.(change.index)\n        },\n        [onIndexChange, onTabChange]\n      )\n\n      const syncCurrentTabScrollPosition = () => {\n        'worklet'\n\n        const name = tabNamesArray[index.value]\n        scrollToImpl(\n          refMap[name],\n          0,\n          scrollYCurrent.value - contentInset,\n          false\n        )\n      }\n\n      /*\n       * We run syncCurrentTabScrollPosition in every frame after the index\n       * changes for about 1500ms because the Lists can be late to accept the\n       * scrollTo event we send. This fixes the issue of the scroll position\n       * jumping when the user changes tab.\n       * */\n      const toggleSyncScrollFrame = (toggle: boolean) =>\n        syncScrollFrame.setActive(toggle)\n      const syncScrollFrame = useFrameCallback(({ timeSinceFirstFrame }) => {\n        syncCurrentTabScrollPosition()\n        if (timeSinceFirstFrame > 1500) {\n          runOnJS(toggleSyncScrollFrame)(false)\n        }\n      }, false)\n\n      useAnimatedReaction(\n        () => {\n          return calculateNextOffset.value\n        },\n        (i) => {\n          if (i !== index.value) {\n            offset.value =\n              scrollY.value[tabNames.value[index.value]] -\n              scrollY.value[tabNames.value[i]] +\n              offset.value\n            runOnJS(propagateTabChange)({\n              prevIndex: index.value,\n              index: i,\n              prevTabName: tabNames.value[index.value],\n              tabName: tabNames.value[i],\n            })\n            index.value = i\n            if (\n              typeof scrollY.value[tabNames.value[index.value]] === 'number'\n            ) {\n              scrollYCurrent.value =\n                scrollY.value[tabNames.value[index.value]] || 0\n            }\n            runOnJS(toggleSyncScrollFrame)(true)\n          }\n        },\n        []\n      )\n\n      useAnimatedReaction(\n        () => headerHeight,\n        (_current, prev) => {\n          if (prev === undefined) {\n            // sync scroll if we started with undefined header height\n            resyncTabScroll()\n          }\n        }\n      )\n\n      const headerTranslateY = useDerivedValue(() => {\n        return revealHeaderOnScroll\n          ? -accDiffClamp.value\n          : -Math.min(scrollYCurrent.value, headerScrollDistance.value)\n      }, [revealHeaderOnScroll])\n\n      const stylez = useAnimatedStyle(() => {\n        return {\n          transform: [\n            {\n              translateY: headerTranslateY.value,\n            },\n          ],\n        }\n      }, [revealHeaderOnScroll])\n\n      const onTabPress = React.useCallback(\n        (name: TabName) => {\n          const i = tabNames.value.findIndex((n) => n === name)\n\n          if (name === focusedTab.value) {\n            const ref = refMap[name]\n            runOnUI(scrollToImpl)(\n              ref,\n              0,\n              headerScrollDistance.value - contentInset,\n              true\n            )\n          } else {\n            containerRef.current?.setPage(i)\n          }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [containerRef, refMap, contentInset]\n      )\n\n      useAnimatedReaction(\n        () => tabNamesArray.length,\n        (tabLength) => {\n          if (index.value >= tabLength) {\n            runOnJS(onTabPress)(tabNamesArray[tabLength - 1])\n          }\n        }\n      )\n\n      const pageScrollHandler = usePageScrollHandler({\n        onPageScroll: (e) => {\n          'worklet'\n          indexDecimal.value = e.position + e.offset\n        },\n      })\n\n      React.useImperativeHandle(\n        ref,\n        () => ({\n          setIndex: (index) => {\n            const name = tabNames.value[index]\n            onTabPress(name)\n            return true\n          },\n          jumpToTab: (name) => {\n            onTabPress(name)\n            return true\n          },\n          getFocusedTab: () => {\n            return tabNames.value[index.value]\n          },\n          getCurrentIndex: () => {\n            return index.value\n          },\n        }),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [onTabPress]\n      )\n\n      return (\n        <Context.Provider\n          value={{\n            contentInset,\n            tabBarHeight,\n            headerHeight,\n            refMap,\n            tabNames,\n            index,\n            snapThreshold,\n            revealHeaderOnScroll,\n            focusedTab,\n            accDiffClamp,\n            indexDecimal,\n            containerHeight,\n            minHeaderHeight,\n            scrollYCurrent,\n            scrollY,\n            setRef,\n            headerScrollDistance,\n            accScrollY,\n            oldAccScrollY,\n            offset,\n            snappingTo,\n            contentHeights,\n            headerTranslateY,\n            width,\n            allowHeaderOverscroll,\n          }}\n        >\n          <Animated.View\n            style={[styles.container, { width }, containerStyle]}\n            onLayout={getContainerLayoutHeight}\n            pointerEvents=\"box-none\"\n          >\n            <Animated.View\n              pointerEvents=\"box-none\"\n              style={[\n                styles.topContainer,\n                headerContainerStyle,\n                !cancelTranslation && stylez,\n              ]}\n            >\n              <View\n                style={[styles.container, styles.headerContainer]}\n                onLayout={getHeaderHeight}\n                pointerEvents=\"box-none\"\n              >\n                {renderHeader &&\n                  renderHeader({\n                    containerRef,\n                    index,\n                    tabNames: tabNamesArray,\n                    focusedTab,\n                    indexDecimal,\n                    onTabPress,\n                    tabProps,\n                  })}\n              </View>\n              <View\n                style={[styles.container, styles.tabBarContainer]}\n                onLayout={getTabBarHeight}\n                pointerEvents=\"box-none\"\n              >\n                {renderTabBar &&\n                  renderTabBar({\n                    containerRef,\n                    index,\n                    tabNames: tabNamesArray,\n                    focusedTab,\n                    indexDecimal,\n                    width,\n                    onTabPress,\n                    tabProps,\n                  })}\n              </View>\n            </Animated.View>\n\n            <AnimatedPagerView\n              ref={containerRef}\n              onPageScroll={pageScrollHandler}\n              initialPage={initialIndex}\n              {...pagerProps}\n              style={[pagerProps?.style, StyleSheet.absoluteFill]}\n            >\n              {tabNamesArray.map((tabName, i) => {\n                return (\n                  <View key={i} style={styles.pageContainer}>\n                    <TabNameContext.Provider value={tabName}>\n                      <Lazy\n                        startMounted={lazy ? undefined : true}\n                        cancelLazyFadeIn={!lazy ? true : !!cancelLazyFadeIn}\n                        // ensure that we remount the tab if its name changes but the index doesn't\n                        key={tabName}\n                      >\n                        {\n                          React.Children.toArray(children)[\n                            i\n                          ] as React.ReactElement\n                        }\n                      </Lazy>\n                    </TabNameContext.Provider>\n                  </View>\n                )\n              })}\n            </AnimatedPagerView>\n          </Animated.View>\n        </Context.Provider>\n      )\n    }\n  )\n)\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  pageContainer: {\n    height: '100%',\n    width: '100%',\n  },\n  topContainer: {\n    position: 'absolute',\n    zIndex: 100,\n    width: '100%',\n    backgroundColor: 'white',\n    shadowColor: '#000000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.23,\n    shadowRadius: 2.62,\n    elevation: 4,\n  },\n  tabBarContainer: {\n    zIndex: 1,\n  },\n  headerContainer: {\n    zIndex: 2,\n  },\n})\n"],"mappings":"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","ignoreList":[]}